sudo: required
env:
- TRAVIS_TAG=continuous
matrix:
  include:
  - env: ARCH=armhf
  - env: ARCH=arm64
  - env: ARCH=amd64
  - env: ARCH=i386
install:
- echo "deb http://de.archive.ubuntu.com/ubuntu xenial main universe" |sudo tee -a
  /etc/apt/sources.list
- sudo apt-get update
- sudo apt-get install qemu-user-static debootstrap -y
script:
- sudo ./build-initrd.sh
before_cache:
- sudo chown -R travis build/
cache:
  directories:
  - build/
before_deploy:
- git config --local user.name "halium-initramfs-bot"
- git config --local user.email "halium-initramfs-bot@users.noreply.github.com"
- git tag -fa "continuous" -m "Generated by Travis-CI"
- export TRAVIS_TAG='continuous'
deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: CneBRzSPrbzR2Jb3MBhnkPR9+tl0YE0u3iO7ap4wQuSYABW+PbZ4HErk26btiOTgO4MWQe+3Mm6/uWoSM3QkGSy8ts6Vi2lPxC+mBHllKtL//Yc7NUsbefAnU20g04f8o6WYgPejlr0rdQK0yZFPMYWrQhV4NQz9iNX3Y+xGMcJsaZ09d2pEXO7w1rvOfuef2almOUdUOnAupGyLa6tIBqS5UsoGkE87kU7a+/jQ1JW4xO3cQGT7inVRR27mBvNjWMKqkH/t79dzMA4ZQEvOMAuE4+Pn2d+GlawEDKEooMQNK0WEo98OcUFoKfdsGnrhNBg/hB80XP3q7Qc8vPnY2Ql+koHjjNJZHpHe/ymCxVrvugm2hhI6x6Bs+SbNt3G+JveXUaZt1YEUNO+LI/7USk5yY2QWR0DwSq0/XWjloHb4X/f5b6ABQ1p3jZdq3Fr2NlJFeoK21M18RM8qa/COVcmvdkuE23ysYuZlEcOawcV/Bh/DguKbm06VemETT4lHEg+Dio95z31KjH3hTD85CTNT+s0VX6EuDQLDqyY8CY+58z2iXVtOcQQXlnhCOH5TMAIXWqQ53VAbP+hMlo/LsRBBZx8LhgYmFbqVK6zipk5QFCZMyKxenFvm945EZReGfqeRgO6eloSblXR/QTjeuRUcVfDbcjPbI7ODFRXVjWY=
  file:
  - out/initrd.img-touch-armhf
  - out/initrd.img-touch-arm64
  - out/initrd.img-touch-amd64
  - out/initrd.img-touch-i386
  on:
    repo: Halium/initramfs-tools-halium
    branch: halium
  overwrite: true
