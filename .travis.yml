sudo: required
env:
- TRAVIS_TAG=continuous
matrix:
  include:
  - env: ARCH=armhf
  - env: ARCH=arm64
  - env: ARCH=amd64
  - env: ARCH=i386
install:
- echo "deb http://de.archive.ubuntu.com/ubuntu xenial main universe" |sudo tee -a
  /etc/apt/sources.list
- sudo apt-get update
- sudo apt-get install qemu-user-static debootstrap -y
script:
- sudo ./build-initrd.sh
before_cache:
- sudo chown -R travis build/
cache:
  directories:
  - build/
before_deploy:
- git config --local user.name "halium-initramfs-bot"
- git config --local user.email "halium-initramfs-bot@users.noreply.github.com"
- git tag -fa "continuous" -m "Generated by Travis-CI"
- export TRAVIS_TAG='continuous'
deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: lwro2LI7X7otsYeT4SiiAsDchlmZiGy/b88mWLgELEkWNYmbiGMYkhazdiTQTDeNr5sunJCERnafkavDMkEM8yU7ZzgjwzJfTXen79+dE5/2YHnaF8HQFjUo0j75/bcHgiAbM9g3AEH32SwuZBVCyFUm/6XID9bZ7TKcKGudySW2wQ0Q8V98IrwXXeyCtgsMhlPJBJ31Cl1bbrmZ1HsqdIM/4zeGFAy71Lr0NgWtQswgbBFiLf3tgif5QQRiS0tekwXzVce3+9fg6j4XfpYWNeAnZh00jc9rXDDzZDKAdJ729xjrTJ5/Y73i/5QjKCcVJShYcBwVvn1aBBuNw+8WQ9SdEr4B/3oRepcdNUuiztD5DNSrDsRqhLQYO9cssOWP7i/ZYQ6lWBtu2SJRzzmW7l5I6rtTo8BVAF+tWSqdIGUJApJZZ1ahStzLI3sdmftm6p/Yhcd6vhA8kZasxlQxQnzWtTKA9DiOpb3hB02X/ZJddpQhMRNzDhJ4hYfoNpyAO4mBTW7qTl1FCLYfmo3Ir4ql5OtJkz2VlC5P29mbNI8gdx+EPgweW384k4Fayjh/MfHO3o2TXE3cpASbYEbWYoUgsyPHZPIKUiVSboiauEWYMIZDIvaKPGr8m8WyvKD2/j4DcaT50Udtt9rkDHzavV4yuUlWZx6NxwrF33V5cBA=
  file:
  - out/initrd.img-touch-armhf
  - out/initrd.img-touch-arm64
  - out/initrd.img-touch-amd64
  - out/initrd.img-touch-i386
  on:
    repo: Halium/initramfs-tools-halium
    branch: halium
  overwrite: true
