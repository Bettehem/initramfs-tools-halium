sudo: required
env:
- TRAVIS_TAG=continuous
matrix:
  include:
  - env: ARCH=armhf
  - env: ARCH=arm64
  - env: ARCH=amd64
  - env: ARCH=i386
install:
- echo "deb http://de.archive.ubuntu.com/ubuntu xenial main universe" |sudo tee -a
  /etc/apt/sources.list
- sudo apt-get update
- sudo apt-get install qemu-user-static debootstrap -y
script:
- sudo ./build-initrd.sh
before_cache:
- sudo chown -R travis build/
cache:
  directories:
  - build/
before_deploy:
- git config --local user.name "halium-initramfs-bot"
- git config --local user.email "halium-initramfs-bot@users.noreply.github.com"
- git tag -fa "continuous" -m "Generated by Travis-CI"
- export TRAVIS_TAG='continuous'
deploy:
  skip_cleanup: true
  provider: releases
  api_key:
    secure: ZSYroDpHr79WfoP26gJS4KfYbM0kA8/Cttb9cKHdrKnoYi+klOCkpq4aeapgUvCUdINh2of4tOA2XsVNDyuUqlKwwIFOOTKEh4DOeKUtnTTCwXH9Rk/HXUF4J154Z5wc1EL7l2KuQDCs6B8zGkefxWOz4KNuFVRfMHjlQBMJIjO+3pe8qMJIDmzCYsgvrfuzKU8LpJtILGJ0Deh8t77iCnqWZL9LNWKTFQRkKkf8APxSyemZQ0iYsRt58SUj+005XMRkT56QpX3UI+gGqYeU+OKOjMnaFzr4BX6ck/n/s1EKYreQY68N7ztwbVW2kejk4HOGCssMn+ZVPsyVSCCNRrtGCH3jS7cBKRFhjLBKrT4WnayQbxqg3+7pNOb1HpMhTx32ysBM4kTJapZPcxl0ZD37r6aq0TIofmfrnQdRXubBy8FssUSrOkOuqrTjdxeO7kQdPF6UjdWQI2KQT2zeXxHxung3eTXXVENN1GhMlArV0z1SIOYVZaaUwVVcsDSVxhQY5pWp81zFPC/V1eLfVjDOx2F8x0fkFRbwGDxDYtbp9d6FH2GZekYD9/qK8ObM1bTYzEHrnq/0zM7qOuydmDbn7wkuhCjv0CnlMDGgltC0PaUk0FoUCVODAIvpHA3pwJhcNU7TNxY90Fo/hxwIfi2Tz9qahDXfET2EfW9Tky8=
  file:
  - out/initrd.img-touch-armhf
  - out/initrd.img-touch-arm64
  - out/initrd.img-touch-amd64
  - out/initrd.img-touch-i386
  on:
    repo: Halium/initramfs-tools-halium
    branch: halium
  overwrite: true
